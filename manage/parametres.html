<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ratchou - Param√®tres</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="Gestion des d√©penses familiales - Ratchou">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Ratchou">
    <link rel="apple-touch-icon" href="../assets/icons/icon-192.png">
    <link rel="manifest" href="../manifest.json">
    
    <!-- Stylesheets -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/bootstrap-icons.min.css" rel="stylesheet">
    <link href="../assets/css/app.css" rel="stylesheet">
    <style>
        .params-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            padding: 1.5rem;
        }
        .params-section h4 {
            border-bottom: 2px solid #f8f9fa;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .tech-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .section-icon {
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }
        .feature-list, .privacy-list {
            list-style: none;
            padding-left: 1rem;
        }
        .feature-list li, .privacy-list li {
            margin-bottom: 0.5rem;
            position: relative;
        }
        .feature-list li::before {
            content: '‚Ä¢';
            color: #007bff;
            font-weight: bold;
            position: absolute;
            left: -1rem;
        }
        .privacy-list li::before {
            content: '‚úì';
            color: #28a745;
            font-weight: bold;
            position: absolute;
            left: -1rem;
        }
        
        /* Section separator styles */
        .section-separator {
            position: relative;
            margin: 2rem 0;
        }
        
        .section-separator hr {
            border-top: 2px solid #dee2e6;
            margin: 0;
        }
        
        .section-separator .separator-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #f8f9fa;
            padding: 0.5rem 1rem;
            border-radius: 15px;
            font-weight: 600;
            color: #6c757d;
            border: 1px solid #dee2e6;
        }

        /* Environment badges */
        #app-version-display .badge {
            font-size: 0.7em;
            vertical-align: middle;
        }

        /* Badge color customizations */
        .badge.bg-warning {
            color: #000 !important; /* Dark text on orange background for DEV */
        }

        .badge.bg-success {
            color: #fff !important; /* White text on green background for PROD */
        }

        .badge.bg-info {
            color: #000 !important; /* Dark text on light blue background for LOCAL */
        }

        .badge.bg-secondary {
            color: #fff !important; /* White text on gray background for OTHER */
        }

        </style>

    <!-- Prevent dark mode flash -->
    <style>
        /* Prevent flash by setting initial colors based on system preference */
        @media (prefers-color-scheme: dark) {
            html { background-color: #212529; color: #dee2e6; }
        }
    </style>
    <script>
        (function() {
            const theme = localStorage.getItem('ratchou-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            let resolvedTheme = 'light';
            if (theme === 'dark' || (theme === 'auto' && prefersDark) || (!theme && prefersDark)) {
                resolvedTheme = 'dark';
            }

            document.documentElement.setAttribute('data-bs-theme', resolvedTheme);
            if (resolvedTheme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            }
        })();
    </script>
</head>
<body>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-body bg-opacity-75" style="z-index: 9999; display: none !important;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Chargement...</span>
        </div>
    </div>

    <!-- Navigation sera inject√©e par le composant header -->

    <div class="container mt-4">
        <!-- Alert Messages -->
        <div id="alertContainer"></div>


        <!-- Accordions Section -->
        <div class="accordion" id="parametersAccordion">
            
            <!-- Security Accordion -->
            <div class="accordion-item" id="security-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-security">
                        üîê S√©curit√© - Changer le code d'acc√®s
                    </button>
                </h2>
                <div id="collapse-security" class="accordion-collapse collapse" data-bs-parent="#parametersAccordion">
                    <div class="accordion-body">
                        <p>Modifiez votre code d'acc√®s √† 4 chiffres pour s√©curiser l'application.</p>
                        <p class="text-muted small">Les d√©tails et avertissements vous seront pr√©sent√©s avant la confirmation finale.</p>
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#accessCodeModal">
                                üîê Changer le code d'acc√®s
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appearance Accordion -->
            <div class="accordion-item" id="appearance-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-appearance">
                        üé® Apparence - Th√®me d'affichage
                    </button>
                </h2>
                <div id="collapse-appearance" class="accordion-collapse collapse" data-bs-parent="#parametersAccordion">
                    <div class="accordion-body">
                        <p>Personnalisez l'apparence de l'application selon vos pr√©f√©rences.</p>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Th√®me d'affichage :</label>
                            <div class="btn-group w-100" role="group" aria-label="Theme selection">
                                <input type="radio" class="btn-check" name="theme-options" id="theme-auto" value="auto">
                                <label class="btn btn-outline-primary" for="theme-auto">
                                    üîÑ Automatique
                                    <small class="d-block text-muted">Suit les pr√©f√©rences syst√®me</small>
                                </label>

                                <input type="radio" class="btn-check" name="theme-options" id="theme-light" value="light">
                                <label class="btn btn-outline-primary" for="theme-light">
                                    ‚òÄÔ∏è Clair
                                    <small class="d-block text-muted">Mode jour</small>
                                </label>

                                <input type="radio" class="btn-check" name="theme-options" id="theme-dark" value="dark">
                                <label class="btn btn-outline-primary" for="theme-dark">
                                    üåô Sombre
                                    <small class="d-block text-muted">Mode nuit</small>
                                </label>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>‚ÑπÔ∏è Information :</strong> Cette pr√©f√©rence est sauvegard√©e localement sur cet appareil uniquement.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backup Accordion -->
            <div class="accordion-item" id="backup-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-backup">
                        üì§ Sauvegarde - Export des donn√©es
                    </button>
                </h2>
                <div id="collapse-backup" class="accordion-collapse collapse" data-bs-parent="#parametersAccordion">
                    <div class="accordion-body">
                        <p>Sauvegardez l'ensemble de vos donn√©es dans un fichier au format ZIP.</p>
                        <p class="text-muted small">Les d√©tails sur le contenu de la sauvegarde vous seront pr√©sent√©s avant la confirmation finale.</p>
                        <div class="text-center mt-3">
                            <a href="export.html" class="btn btn-success">
                                üì§ Exporter les donn√©es
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PWA Installation Accordion -->
            <div class="accordion-item" id="pwa-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-pwa">
                        üì± Application PWA - Installation
                    </button>
                </h2>
                <div id="collapse-pwa" class="accordion-collapse collapse" data-bs-parent="#parametersAccordion">
                    <div class="accordion-body">
                        <p>Installez Ratchou comme une application native sur votre appareil pour une meilleure exp√©rience.</p>
                        <p class="text-muted small">Acc√®s aux informations syst√®me, guide d'installation et statut PWA d√©taill√©.</p>
                        <div class="text-center mt-3">
                            <a href="pwa.html" class="btn btn-primary">
                                üì± G√©rer l'installation PWA
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Uninstall Accordion -->
            <div class="accordion-item" id="uninstall-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-uninstall">
                        üóëÔ∏è D√©sinstallation - R√©initialisation compl√®te
                    </button>
                </h2>
                <div id="collapse-uninstall" class="accordion-collapse collapse" data-bs-parent="#parametersAccordion">
                    <div class="accordion-body">
                        <p>Supprimez <strong>d√©finitivement et compl√®tement</strong> toutes les donn√©es de Ratchou de cet appareil.</p>
                        <p class="text-danger fw-bold">Cette action est irr√©versible.</p>
                        <p class="text-muted small">Une double confirmation vous sera demand√©e pour √©viter toute suppression accidentelle.</p>
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#uninstallModal">
                                üóëÔ∏è Proc√©der √† la d√©sinstallation
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Separator between Actions and Information -->
        <div class="section-separator">
            <hr>
            <div class="separator-label">
                üìñ Informations
            </div>
        </div>

        <!-- Information Accordions -->
        <div class="accordion" id="informationAccordion">

            <!-- About Accordion -->
            <div class="accordion-item" id="about-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-about">
                        üìñ √Ä propos de Ratchou
                    </button>
                </h2>
                <div id="collapse-about" class="accordion-collapse collapse" data-bs-parent="#informationAccordion">
                    <div class="accordion-body">
                        <div class="text-center mb-4">
                            <h5 id="app-version-display">Ratchou v...</h5>
                            <p class="text-muted">Gestion familiale des d√©penses - Version IndexedDB</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>üéØ Fonctionnalit√©s principales</h6>
                                <ul class="feature-list">
                                    <li>Gestion multi-comptes</li>
                                    <li>Suivi des mouvements</li>
                                    <li>Cat√©gorisation flexible</li>
                                    <li>D√©penses fixes r√©currentes</li>
                                    <li>Projection financi√®re</li>
                                    <li>Export/Import des donn√©es</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>üõ°Ô∏è Confidentialit√©</h6>
                                <ul class="privacy-list">
                                    <li>100% offline</li>
                                    <li>Donn√©es stock√©es localement</li>
                                    <li>Aucune transmission externe</li>
                                    <li>Code d'acc√®s s√©curis√©</li>
                                    <li>Pas de cookies externes</li>
                                    <li>Pas de tracking</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h6>üíæ Technologie</h6>
                            <p class="text-muted mb-2">
                                Cette version utilise IndexedDB pour un stockage local performant et une utilisation 
                                100% offline. Toutes vos donn√©es restent priv√©es sur votre appareil.
                            </p>
                            <div class="tech-badges">
                                <span class="badge bg-secondary">HTML5</span>
                                <span class="badge bg-secondary">JavaScript ES6+</span>
                                <span class="badge bg-secondary">IndexedDB</span>
                                <span class="badge bg-secondary">Bootstrap 5</span>
                                <span class="badge bg-success">Offline First</span>
                                <span class="badge bg-primary">PWA Ready</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Legal Accordion -->
            <div class="accordion-item" id="legal-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-legal">
                        ‚öñÔ∏è Mentions l√©gales
                    </button>
                </h2>
                <div id="collapse-legal" class="accordion-collapse collapse" data-bs-parent="#informationAccordion">
                    <div class="accordion-body">
                        <div class="row">
                            <div class="col-12">
                                <h6>üìù Identification de l'√©diteur</h6>
                                <p><strong>√âditeur :</strong> Francis Trautmann</p>
                                <p><strong>Adresse :</strong> 853 Chemin Cl√©dart, 82410 Saint Etienne De Tulmont, France</p>
                                <p><strong>Contact :</strong> francis@ratchou.com | <a href="https://x.com/fran6t" target="_blank" class="text-decoration-none">@fran6t</a></p>
                                <p><strong>Directeur de publication :</strong> Francis Trautmann</p>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h6>üåê H√©bergement</h6>
                                <p><strong>H√©bergeur :</strong> GitHub, Inc.</p>
                                <p><strong>Adresse :</strong> 88 Colin P Kelly Jr St, San Francisco, CA 94107, √âtats-Unis</p>
                                <p><strong>Service :</strong> GitHub Pages</p>
                                
                                <h6 class="mt-4">üì± Description du service</h6>
                                <p><strong>Ratchou</strong> - Application web de gestion familiale des d√©penses</p>
                                <p>Progressive Web App (PWA) 100% offline avec stockage local via IndexedDB</p>
                            </div>
                            
                            <div class="col-md-6">
                                <h6>üõ°Ô∏è Protection des donn√©es personnelles (RGPD)</h6>
                                <p><strong>Collecte de donn√©es :</strong> Aucune donn√©e personnelle n'est collect√©e par cette application</p>
                                <p><strong>Stockage :</strong> Toutes les donn√©es sont stock√©es localement dans votre navigateur (IndexedDB)</p>
                                <p><strong>Transmission :</strong> Aucune donn√©e n'est transmise √† des serveurs externes</p>
                                <p><strong>Cookies :</strong> Aucun cookie de suivi ou de publicit√©</p>
                                <p><strong>Tracking :</strong> Aucun syst√®me de suivi des utilisateurs</p>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h6>¬©Ô∏è Propri√©t√© intellectuelle</h6>
                                <p><strong>Application :</strong> Francis Trautmann</p>
                                <p><strong>Logos et ic√¥nes :</strong> G√©n√©r√©s par intelligence artificielle (ChatGPT)</p>
                                <p><strong>Frameworks utilis√©s :</strong> Bootstrap (MIT License), Vanilla JavaScript</p>
                                <p><strong>Code source :</strong> Disponible publiquement sur GitHub</p>
                            </div>
                            
                            <div class="col-md-6">
                                <h6>‚öñÔ∏è Responsabilit√©s et limitations</h6>
                                <p>L'utilisateur est responsable de :</p>
                                <ul>
                                    <li>La sauvegarde de ses donn√©es via la fonction d'export</li>
                                    <li>La s√©curit√© de son code d'acc√®s</li>
                                    <li>L'exactitude des donn√©es saisies</li>
                                </ul>
                                <p class="text-muted small">Cette application est fournie en l'√©tat, sans garantie.</p>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-12">
                                <h6>‚öñÔ∏è Droit applicable et juridiction</h6>
                                <p>Les pr√©sentes mentions l√©gales sont r√©gies par le droit fran√ßais. En cas de litige, les tribunaux fran√ßais de Montauban (Tarn et Garonne) seront seuls comp√©tents.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy Accordion -->
            <div class="accordion-item" id="privacy-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-privacy">
                        üîí Politique de confidentialit√©
                    </button>
                </h2>
                <div id="collapse-privacy" class="accordion-collapse collapse" data-bs-parent="#informationAccordion">
                    <div class="accordion-body">
                        <div class="alert alert-success">
                            <h6 class="alert-heading">üõ°Ô∏è Confidentialit√© maximale</h6>
                            <p class="mb-0">
                                Ratchou a √©t√© con√ßu avec la confidentialit√© comme priorit√© absolue. 
                                Vos donn√©es financi√®res ne quittent jamais votre appareil.
                            </p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>üìä Collecte de donn√©es</h6>
                                <p><strong>Aucune donn√©e n'est collect√©e</strong> par cette application :</p>
                                <ul>
                                    <li>Pas de t√©l√©m√©trie</li>
                                    <li>Pas d'analytics</li>
                                    <li>Pas de tracking utilisateur</li>
                                    <li>Pas de cookies de suivi</li>
                                    <li>Pas de donn√©es transmises √† des tiers</li>
                                </ul>
                                
                                <h6 class="mt-4">üíæ Stockage des donn√©es</h6>
                                <p>Toutes vos donn√©es sont stock√©es localement :</p>
                                <ul>
                                    <li><strong>IndexedDB</strong> : Base de donn√©es locale du navigateur</li>
                                    <li><strong>Chiffrement</strong> : Code d'acc√®s hach√© localement</li>
                                    <li><strong>Isolation</strong> : Donn√©es isol√©es par domaine</li>
                                    <li><strong>Contr√¥le</strong> : Vous pouvez supprimer toutes les donn√©es</li>
                                </ul>
                            </div>
                            
                            <div class="col-md-6">
                                <h6>üåê Fonctionnement hors ligne</h6>
                                <p>
                                    L'application fonctionne enti√®rement sans connexion internet apr√®s 
                                    le premier chargement. Aucune requ√™te r√©seau n'est effectu√©e pendant 
                                    l'utilisation normale.
                                </p>
                                
                                <h6 class="mt-4">üîê S√©curit√©</h6>
                                <ul>
                                    <li>Code d'acc√®s √† 4 chiffres (non transmis)</li>
                                    <li>Sessions locales uniquement</li>
                                    <li>Pas de vuln√©rabilit√© r√©seau (offline)</li>
                                    <li>Code source transparent</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resources Accordion -->
            <div class="accordion-item" id="resources-accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-resources">
                        üåê Ressources et liens
                    </button>
                </h2>
                <div id="collapse-resources" class="accordion-collapse collapse" data-bs-parent="#informationAccordion">
                    <div class="accordion-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">üåç Site explicatif</h5>
                                        <p class="card-text">D√©couvrez Ratchou et ses fonctionnalit√©s sur le site officiel.</p>
                                        <button class="btn btn-outline-primary" id="websiteBtn">
                                            Visiter le site
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">üêô Code source GitHub</h5>
                                        <p class="card-text">Acc√©dez au code source et aux informations techniques du projet.</p>
                                        <button class="btn btn-outline-dark" id="githubBtn">
                                            Voir le d√©p√¥t
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">‚≠ê Recommander</h5>
                                        <p class="card-text">Partager Ratchou avec vos proches.</p>
                                        <button class="btn btn-outline-success" id="shareBtn">
                                            Partager l'app
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Modales seront inject√©es par le composant modals -->

    <!-- Sidebar sera inject√© par le composant sidebar -->

    <script src="../assets/js/bootstrap.bundle.min.js"></script>

    <!-- Core Ratchou Scripts -->
    <script src="../js/core/theme-manager.js"></script>
    <script src="../js/core/private-mode-detector.js"></script>
    <script src="../js/core/utils.js"></script>
    <script src="../js/core/indexeddb-wrapper.js"></script>
    <script src="../js/core/models/base-model.js"></script>
    <script src="../js/core/models/comptes-model.js"></script>
    <script src="../js/core/models/categories-model.js"></script>
    <script src="../js/core/models/beneficiaires-model.js"></script>
    <script src="../js/core/models/type_depenses-model.js"></script>
    <script src="../js/core/models/mouvements-model.js"></script>
    <script src="../js/core/models/recurrents-model.js"></script>
    <script src="../js/core/auth.js"></script>
    <script src="../js/core/ratchou-app.js"></script>
    
    <!-- Component System -->
    <script src="../js/components/component-loader.js"></script>

    <!-- Settings Page Script -->
    <script src="../js/pages/parametres.js"></script>
    
    <!-- PWA Scripts -->
    <script src="../js/pwa/install.js"></script>
</body>
</html>